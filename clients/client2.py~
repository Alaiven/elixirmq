import socket
import json


TCP_IP = "127.0.0.1"
TCP_PORT = 30001
BUFFER_SIZE = 1024

CHANNEL = "channel2"
TARGET_CHANNEL = "channel1"

SUB_MSG = json.dumps({'command': 'subscribe', 'channel': CHANNEL})

MSG = json.dumps({'command': 'send', 'channel': TARGET_CHANNEL, "message": "from1"})

s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((TCP_IP, TCP_PORT))
s.send(SUB_MSG)

while True:
    data = s.recv(BUFFER_SIZE)
    if not data:
        break
    print data
    s.send(MSG)

s.close()
